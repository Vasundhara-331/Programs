# include <stdio.h>
struct Customer
{
    int acno;
    char name[20];
    int balance;
}c[10];
int main()
{
    int an,bal,wa,da,n,choice=0,flag,i;
    printf("Enter the number of records:");
    scanf("%d",&n);
    for(i=0;i<n;i++)
    {
       printf("\nCustomer record: %d",i+1);
       printf("\nAccount no: ");
       scanf("%d",&c[i].acno);
       printf("\nAccount holder: ");
       scanf("%s",c[i].name);
       getchar();
       printf("\nAccount balance:");
       scanf("%d",&c[i].balance);
    }
    do
    {
        
        printf("\n1: Display all records");
        printf("\n2: Withdrawal");
        printf("\n3: Deposit");
        printf("\n4: Search customer information");
        printf("\nPress 0 to exit");
        printf("\nEnter the choice:\n");
        scanf("%d",&choice);
        switch(choice)
        {
            case 1:
            {
              printf("\nYou have chosen to display customer records");
              printf("\nA/c\tName\tBalance\n");
              for(i=0;i<n;i++)
              {
                printf("%d\t%s\t%d\n",c[i].acno,c[i].name,c[i].balance);
              }
            break;
            }
            
            case 2:
            {
                printf("\nYou have chosen withdrawal from account");
                printf("\nEnter account number: ");
                scanf("%d",&an);
                printf("\nEnter amount to be withdrawn: ");
                scanf("%d",&wa);
                for(i=0;i<n;i++)
                {
                    if(c[i].acno==an)
                    {
                        if(c[i].balance>=wa)
                        {
                            c[i].balance-=wa;
                        }
                        else
                        {
                        printf("\nInsufficient balance!");
                        flag=0;
                        }
                        break;
                    }
                    else
                    flag=1;
                }
                if(flag==1)
                printf("\nAccount does not exist!");
                break;
            }
            
            case 3:
            {
              printf("\nYou have chosen to deposit an amount");
              printf("\nEnter the account number: ");
              scanf("%d",&an);
              printf("\nEnter the deposit amount: ");
              scanf("%d",&da);
              for(i=0;i<n;i++)
              {
                  if(c[i].acno==an)
                  {
                      c[i].balance+=da;
                      flag=0;
                      break;
                  }
                  else 
                  flag=1;
              }
              if(flag==1)
              printf("\nAccount number does not exist!");
              break;
            }
            
            case 4:
            {
              printf("\nYou have chosen to view customer details:");
              printf("\nEnter account number:");
              scanf("%d",&an);
              for(i=0;i<n;i++)
              {
                  if(c[i].acno==an)
                  {
                      printf("\nA/c\tName\tBalance");
                      printf("%d\t%s\t%d",c[i].acno,c[i].name,c[i].balance);
                      flag=0;
                      break;
                  }
                  else 
                  flag=1;
              }
              if(flag==1)
              printf("\nAccount does not exist!");
              break;
            }
            case 0:
            {
                printf("\nThank you for using our services");
                break;
            }
            default:
            printf("\nInvalid choice. Please try again");
        }
    }
    while(choice!=0);
    printf("\nMenu closed");
    return 0;
}
